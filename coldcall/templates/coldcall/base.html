{% load static %}
<link rel="icon" type="image/x-icon" href="{% static 'favicon.ico' %}" />

{% comment %} Do not use this approach on any other template.
Mobile templates are set up to override web templates, but this causes base.html to
recieve conflicting info.
For this file, a check for request.is_mobile is used to pass what *would* be the mobile menu.
{% endcomment %}

{% if request.is_mobile %}
  <link rel="stylesheet" href="{% static 'coldcall/mobile/base.css' %}" />

  <header>
    <div class="navbar">
      <button class="menuButton" onclick="show_menu()">â˜°</button>
      <div class="menu" id="menu">
        <ul>
          <li><a href="/">Home</a></li>
          <li><a href="/manageclasses">Manage Classes</a></li>
          <li><a href="/randomizer">Randomize</a></li>
          <li><a class="menuButton" onclick="show_menu()">Close Menu</a></li>
        </ul>
      </div>
    </div>
  </header>

  <script>
    function show_menu() {
      const menu = document.getElementById("menu");
      menu.classList.toggle("show");
    }

    document.addEventListener("click", function (event) {
      const menu = document.getElementById("menu");
      if (
        !menu.contains(event.target) &&
        !event.target.classList.contains("menuButton")
      ) {
        menu.classList.remove("show");
      }
    });
  </script>
{% else %}
  <link rel="stylesheet" href="{% static 'coldcall/base.css' %}" />
  <header>
    <nav class="main-nav">
      <div class="nav-links">
        <a href="/" class="nav-link {% if request.path == '/' %}active{% endif %}">Home</a>
        <a href="/manageclasses" class="nav-link {% if request.path == '/manageclasses' %}active{% endif %}">Manage Classes</a>
        <a href="/randomizer" class="nav-link {% if request.path == '/randomizer' %}active{% endif %}">Randomize</a>
      </div>
      <div class="profile-link">
        <div class="dropdown" id="profileDropdown">
          <a href="#" class="nav-link profile-trigger {% if request.path == '/profile/' %}active{% endif %}" id="profileTrigger">
            {% if user.is_authenticated and user.userdata.profile_picture %}
              <div class="profile-nav-container">
                <img src="{{ user.userdata.profile_picture.url }}" alt="Profile" class="profile-picture-nav">
              </div>
            {% else %}
              <span class="profile-icon">ðŸ‘¤</span>
            {% endif %}
          </a>
          <div class="dropdown-content" id="profileDropdownContent">
            <a href="/profile/" class="dropdown-item">Profile</a>
            <form action="{% url 'logout' %}" method="post" class="logout-form">
              {% csrf_token %}
              <button type="submit" class="logout-button">Logout</button>
            </form>
          </div>
        </div>
      </div>
    </nav>
  </header>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const profileTrigger = document.getElementById('profileTrigger');
      const dropdownContent = document.getElementById('profileDropdownContent');
      
      // Toggle dropdown on click
      profileTrigger.addEventListener('click', function(e) {
        e.preventDefault();
        dropdownContent.style.display = 
          dropdownContent.style.display === 'block' ? 'none' : 'block';
      });
      
      // Close the dropdown when clicking outside
      document.addEventListener('click', function(e) {
        if (!document.getElementById('profileDropdown').contains(e.target)) {
          dropdownContent.style.display = 'none';
        }
      });
    });
  </script>
{% endif %}